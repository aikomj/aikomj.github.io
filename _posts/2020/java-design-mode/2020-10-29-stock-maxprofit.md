---
layout: post
title: 计算股票买卖的最大收益时机
category: java-design
tags: [java-design]
keywords: java
excerpt: 只能玩玩学习一下简单的算法，找到生活中的应用场景
lock: noneed
---

## 1、收益问题

出一道关于股票买卖的算法题

给定一个数组，它存储着每天的股票价格，第n个元素代表第n天的价格，如果最多只允许进行1次买入卖出，那么最大收益是多少？下面是数组

![](\assets\images\2020\java\stock-1.jpg)

显然从第2天价格为1的时候买入，第5天价格为8的时候卖出，可以获得最大收益

![](\assets\images\2020\java\stock-2.jpg)

次时最大收益是8-1=7，那算法是如何呢

有童鞋会想，股票不都是低买高卖吗，我直接遍历一遍数组，找到其中的最大值和最小值，相减就是最大收益了。

![](\assets\images\2020\java\stock-3.jpg)

但是你想的太简单了，如果最大值在最小值的后面，确实可以这么做，但是如果最大值在最小值之前呢？

![](\assets\images\2020\java\stock-4.jpg)

这样我们又该怎么交易？我们要思考一下，假如卖出股票的时间点已经确定，那么选择什么的时间点来买入能保证收益最大呢？我觉得买入时间点需要满足两个条件：

1、必须早于卖出时间点

2、在条件1的区间内价格最低

以下图为例子：假如我们确定价格4的时候为卖出时间点，那么此时哪个是最佳买入时间点？

![](\assets\images\2020\java\stock-5.jpg)

显然价格2的时间是满足前面的两个条件，我们从数组第2个元素开始把每个时间点都假设成卖出点，找到对应的最佳买入点，逐一计算差值，就可以从中得到最大收益了。为此，会有两个变量最小值和最大收益

- 第1步：初始化操作，第1个元素当做临时的最小价格

